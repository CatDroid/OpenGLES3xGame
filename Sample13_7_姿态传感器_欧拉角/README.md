### 欧拉角
* 欧拉角 姿态角
* 机体坐标系与地面坐标系之间的夹角关系：欧拉角
*
![yaw_roll_pitch](yaw_roll_pitch.png)

* 机体坐标系(Aircraft-body coordinate frame)
  * 原点O取在飞机质心处，坐标系与飞机固连
  * x轴 在飞机对称平面内，并平行于飞机的设计轴线指向机头
  * y轴 垂直于飞机对称平面指向机身右方
  * z轴 在飞机对称平面内，与x轴垂直并指向机身下方
* 地面坐标系（earth-surface inertial reference frame)
  * 在地面上选一点Og
  * xg轴 在水平面内并指向某一方向(比如北极方向)
  * yg轴 在水平面内垂直于xg轴，其指向按右手定则确定
  * zg轴 垂直于地面并指向地心
  * 可以认为是 在水平地面上，正北方为xg轴正方向，正东方位yg轴正方向，重力垂直向下是zg轴正方向
* 姿态角均为零时，两个坐标系相应坐标轴重合
* 在欧拉角坐标系中
  * Yaw轴，偏航角，一直跟重力方向相反，垂直向上，左手螺旋为正，0度是正北方，90度(1.57rad)是正东方，270度(-1.57rad)是正西方，
  * Pitch轴，俯仰角，跟随绕Yaw轴旋转相同的角度，始终跟Yaw和Roll轴平面相互垂直(可见，Yaw和Pitch都跟手机关系不固定)，向上为负(左手螺旋)，[-π/2 ~ π/2]
  * Roll轴，与手机的长轴固定，右倾斜为正，(??右手螺旋??) ，[-π ~ π]


### Android得到欧拉角
* 加速度传感器三轴+磁场传感器三轴，总共六轴联算
* API: 
```
  // gravity geomagnetic 分别是 加速度和磁场传感器 的三轴值
  // I 可以为空
  // R 用来转载返回值：旋转矩阵R
  public static boolean getRotationMatrix(float[] R, float[] I,
            float[] gravity, float[] geomagnetic)
  
  // R 旋转矩阵
  // values 用来装载返回值 欧拉角
  public static float[] getOrientation(float[] R, float values[]) 

```


### 欧拉角的万向节死锁
* <https://blog.csdn.net/AndrewFan/article/details/60981437>
* 目标是保证中间的"转子和转轴",转子要保持水平，中间的旋转轴要保持垂直
* 从外面到里面来看，每个平衡环到里面的平衡环的连接头，就是自己的旋转轴，一共有三个连接头，提供3个自由度(偏航 俯仰 旋转/桶滚)
* 万向锁的结果是，有两个连接头/旋转轴，的转动都是改变同一个自由度
* 只要当一个轴先旋转90度，然后再其他轴做旋转，就会出现
* 欧拉角的“万向节死锁”问题，是由于欧拉旋转定义本身造成的，欧拉角顺规和轴向的定义方式，造就了“万向节死锁”问题的自然形成

### Demo
* 在高通晓龙820,小米5上跑是正常的(如上面yaw,pitch,roll所述)，但在荣耀v10是不正确的，原因没有找

### 其他传感器
* 重力加速度传感器: 左下角 右手准侧  m²/s 
* 磁场传感器：左下角 右手准侧  微特斯拉
* 陀螺仪传感器：左下角 右手准侧 rad/s 
* 接近传感器：1cm左右，离散值分别表示接近和非接近
* 光传感器：返回光强度，流明单位 
* 温度传感器：返回摄氏度

  